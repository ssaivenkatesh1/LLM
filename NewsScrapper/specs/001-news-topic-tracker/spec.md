# Feature Specification: Global News Topic Tracker

**Feature Branch**: `001-news-topic-tracker`  
**Created**: 2025-11-02
**Status**: Draft  
**Input**: User description: "Global News Topic Tracker: Scrape Google News and summarize trending topics using LLMs. We should be able to switch between LLMs - Gemini and OpenAI"

## Clarifications

### Session 2025-11-02

- Q: How should the system determine what topics are "trending"? → A: Count keyword occurrences in headlines over the last 24 hours.
- Q: What should be the default data retention policy for scraped articles and generated summaries? → A: 7 days
- Q: How should the system behave if an LLM provider's API key is invalid or missing? → A: Log a fatal error and terminate the process.
- Q: How should the scraping and summarization process be initiated? → A: Manually, via a "Refresh" button in the frontend UI.

## User Scenarios & Testing *(mandatory)*

### User Story 1 - View Trending Topics (Priority: P1)

A user runs the tracker to get the latest trending news topics from Google News, summarized by the default LLM (Gemini). This provides the core value of the feature.

**Why this priority**: This is the primary function of the feature and delivers immediate value to the user.

**Independent Test**: Can be tested by running the scraper and verifying that a list of summarized topics is produced.

**Acceptance Scenarios**:

1.  **Given** the system is configured with the default LLM, **When** the user initiates the tracking process, **Then** the system outputs a list of at least 5 distinct trending topics, each with a 1-3 sentence summary.
2.  **Given** the tracker has run successfully, **When** the user views the output, **Then** each topic summary is coherent and relevant to the topic.

---

### User Story 2 - Switch LLM Provider (Priority: P2)

A user wants to change the summarization engine from the default (Gemini) to OpenAI to compare summary quality or for cost reasons.

**Why this priority**: This provides the flexibility requested in the feature description and allows for comparison and optimization.

**Independent Test**: Can be tested by changing a configuration setting and running the tracker again.

**Acceptance Scenarios**:

1.  **Given** the system is configured to use Gemini, **When** the user updates the configuration to use OpenAI, **Then** the system confirms the change.
2.  **Given** the system is configured to use OpenAI, **When** the user runs the tracker, **Then** the summaries are generated by the OpenAI API.

---

### User Story 3 - Manually Refresh Topics (Priority: P1)

A user wants to manually trigger a new scrape and summarization process to get the most up-to-date trending topics.

**Why this priority**: This provides immediate control to the user for fresh data, which is critical for a news tracker.

**Independent Test**: Can be tested by clicking the "Refresh" button and observing new topics or updated summaries.

**Acceptance Scenarios**:

1.  **Given** the user is viewing the trending topics, **When** the user clicks the "Refresh" button, **Then** the system initiates a new scraping and summarization process.
2.  **Given** a new scraping and summarization process has completed, **When** the user views the topics, **Then** the displayed topics and summaries are updated with the latest data.

---

### Edge Cases

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: The system MUST scrape headlines from Google News.
- **FR-002**: The system MUST identify trending topics by counting keyword occurrences from scraped headlines within the last 24 hours.
- **FR-003**: The system MUST generate a concise summary for each identified trending topic using a configured LLM.
- **FR-004**: The system MUST allow a user to configure the LLM provider to be either Gemini or OpenAI.
- **FR-005**: The system MUST output the trending topics and their corresponding summaries.
- **FR-006**: The system MUST automatically delete scraped articles and generated summaries that are older than 7 days.

### Key Entities *(include if feature involves data)*

- **NewsArticle**: Represents a single news item scraped from a source. Key attributes include `title`, `url`, `source`, and `scraped_at`.
- **Topic**: Represents a trending subject identified from multiple news articles. Key attributes include `name` and a list of associated `NewsArticle`s.
- **Summary**: Represents the summarized text for a `Topic`. Key attributes include `text` and the `llm_provider` used to generate it.

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: The system successfully scrapes at least 95% of the top 50 headlines from the primary Google News feed in each run.
- **SC-002**: The topic identification algorithm can produce at least 5 distinct, relevant topics from a 24-hour news cycle.
- **SC-003**: Summaries are consistently coherent, factually derived from the source articles, and do not exceed 3 sentences.
- **SC-004**: A user can switch the active LLM provider (Gemini/OpenAI) with a single configuration change that takes effect on the next run.
- **SC-005**: The end-to-end process, from scraping to returning a full list of summarized topics, completes within 10 minutes.